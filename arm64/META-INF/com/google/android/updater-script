#
# Updater-script
#
ui_print("==============================================");
ui_print("Custom GApps Package : BiTGApps               ");
ui_print("==============================================");
ui_print(" Brought to you by:                           ");
ui_print("  * TheHitMan @ xda-developers                ");
ui_print("==============================================");
ui_print(" ");
ui_print("=================Installing Files=================");
ui_print(" ");
ui_print(">> Mount Partitions");
run_program("/sbin/busybox", "mount", "/system");

########## AROMA ##########

# Options for Drivers

# Pie
if file_getprop("/tmp/aroma-data/bit.prop","selected.0") == "1" then
ui_print(">> Mount Partitions");
run_program("/sbin/busybox", "mount", "/system");
ui_print(">> Removing Pre-installed Files");
delete("/system/addon.d/90bit_gapps.sh");
delete("/system/xbin/busybox");
delete_recursive("/system/app/FaceLock");
delete_recursive("/system/app/GoogleContactsSyncAdapter");
delete_recursive("/system/app/GoogleExtShared");
delete_recursive("/system/app/MarkupGoogle");
delete_recursive("/system/app/SoundPickerPrebuilt");
delete_recursive("/system/etc/default-permissions");
delete("/system/etc/permissions/com.google.android.dialer.support.xml");
delete("/system/etc/permissions/com.google.android.maps.xml");
delete("/system/etc/permissions/com.google.android.media.effects.xml");
delete("/system/etc/permissions/com.google.widevine.software.xml");
delete("/system/etc/permissions/privapp-permissions-google.xml");
delete_recursive("/system/etc/preferred-apps");
delete("/system/etc/sysconfig/dialer_experience.xml");
delete("/system/etc/sysconfig/google.xml");
delete("/system/etc/sysconfig/google_build.xml");
delete("/system/etc/sysconfig/google_exclusives_enable.xml");
delete("/system/etc/sysconfig/google-hiddenapi-package-whitelist.xml");
delete("/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
delete("/system/etc/g.prop");
delete("/system/framework/com.google.android.dialer.support.jar");
delete("/system/framework/com.google.android.maps.jar");
delete("/system/framework/com.google.android.media.effects.jar");
delete("/system/framework/com.google.widevine.software.drm.jar");
delete("/system/lib/libfilterpack_facedetect.so");
delete("/system/lib/libfrsdk.so");
delete("/system/lib64/libbarhopper.so");
delete("/system/lib64/libfacenet.so");
delete("/system/lib64/libfilterpack_facedetect.so");
delete("/system/lib64/libfrsdk.so");
delete("/system/lib64/libjni_latinimegoogle.so");
delete("/system/lib64/libsketchology_native.so");
delete_recursive("/system/priv-app/AndroidMigratePrebuilt");
delete_recursive("/system/priv-app/AndroidPlatformServices");
delete_recursive("/system/priv-app/ConfigUpdater");
delete_recursive("/system/priv-app/GoogleBackupTransport");
delete_recursive("/system/priv-app/GoogleExtServices");
delete_recursive("/system/priv-app/GoogleServicesFramework");
delete_recursive("/system/priv-app/Phonesky");
delete_recursive("/system/priv-app/PrebuiltGmsCorePi");
delete_recursive("/system/priv-app/WellbeingPrebuilt");
delete_recursive("/system/usr/srec");
ui_print(">> Getting addon.d dependency data");
package_extract_file("common/pie/tmp_run.sh", "/tmp/tmp_run.sh");
set_perm(0, 0, 0755, "/tmp/tmp_run.sh");
run_program("/tmp/tmp_run.sh");
ui_print(">> Installing addon.d dependency");
package_extract_file("common/pie/90bit_gapps.sh", "/system/addon.d/90bit_gapps.sh");
ui_print(">> Extracting Files");
ui_print(">> Installing System Application");
package_extract_dir("common/pie/FaceLock", "/system/app/FaceLock");
package_extract_dir("common/pie/GoogleContactsSyncAdapter", "/system/app/GoogleContactsSyncAdapter");
package_extract_dir("common/pie/GoogleExtShared", "/system/app/GoogleExtShared");
package_extract_dir("common/pie/MarkupGoogle", "/system/app/MarkupGoogle");
package_extract_dir("common/pie/SoundPickerPrebuilt", "/system/app/SoundPickerPrebuilt");
ui_print(">> Installing System Priv-Application");
package_extract_dir("common/pie/AndroidMigratePrebuilt", "/system/priv-app/AndroidMigratePrebuilt");
package_extract_dir("common/pie/AndroidPlatformServices", "/system/priv-app/AndroidPlatformServices");
package_extract_dir("common/pie/ConfigUpdater", "/system/priv-app/ConfigUpdater");
package_extract_dir("common/pie/GoogleBackupTransport", "/system/priv-app/GoogleBackupTransport");
package_extract_dir("common/pie/GoogleExtServices", "/system/priv-app/GoogleExtServices");
package_extract_dir("common/pie/GoogleServicesFramework", "/system/priv-app/GoogleServicesFramework");
package_extract_dir("common/pie/Phonesky", "/system/priv-app/Phonesky");
package_extract_dir("common/pie/PrebuiltGmsCorePi", "/system/priv-app/PrebuiltGmsCorePi");
package_extract_dir("common/pie/WellbeingPrebuilt", "/system/priv-app/WellbeingPrebuilt");
ui_print(">> Extra Files");
package_extract_dir("common/pie/system/etc/default-permissions", "/system/etc/default-permissions");
package_extract_file("common/pie/system/etc/permissions/com.google.android.dialer.support.xml", "/system/etc/permissions/com.google.android.dialer.support.xml");
package_extract_file("common/pie/system/etc/permissions/com.google.android.maps.xml", "/system/etc/permissions/com.google.android.maps.xml");
package_extract_file("common/pie/system/etc/permissions/com.google.android.media.effects.xml", "/system/etc/permissions/com.google.android.media.effects.xml");
package_extract_file("common/pie/system/etc/permissions/com.google.widevine.software.drm.xml", "/system/etc/permissions/com.google.widevine.software.xml");
package_extract_file("common/pie/system/etc/permissions/privapp-permissions-google.xml", "/system/etc/permissions/privapp-permissions-google.xml");
package_extract_dir("common/pie/system/etc/preferred-apps", "/system/etc/preferred-apps");
package_extract_file("common/pie/system/etc/sysconfig/dialer_experience.xml", "/system/etc/sysconfig/dialer_experience.xml");
package_extract_file("common/pie/system/etc/sysconfig/google.xml", "/system/etc/sysconfig/google.xml");
package_extract_file("common/pie/system/etc/sysconfig/google_build.xml", "/system/etc/sysconfig/google_build.xml");
package_extract_file("common/pie/system/etc/sysconfig/google_exclusives_enable.xml", "/system/etc/sysconfig/google_exclusives_enable.xml");
package_extract_file("common/pie/system/etc/sysconfig/google-hiddenapi-package-whitelist.xml", "/system/etc/sysconfig/google-hiddenapi-package-whitelist.xml");
package_extract_file("common/pie/system/etc/sysconfig/whitelist_com.android.omadm.service.xml", "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
package_extract_file("common/pie/system/etc/g.prop", "/system/etc/g.prop");
ui_print(">> Installing Framework");
package_extract_file("common/pie/system/framework/com.google.android.dialer.support.jar", "/system/framework/com.google.android.dialer.support.jar");
package_extract_file("common/pie/system/framework/com.google.android.maps.jar", "/system/framework/com.google.android.maps.jar");
package_extract_file("common/pie/system/framework/com.google.android.media.effects.jar", "/system/framework/com.google.android.media.effects.jar");
package_extract_file("common/pie/system/framework/com.google.widevine.software.drm.jar", "/system/framework/com.google.widevine.software.drm.jar");
ui_print(">> Installing FaceLock Files");
package_extract_file("common/pie/system/lib/libfilterpack_facedetect.so", "/system/lib/libfilterpack_facedetect.so");
package_extract_file("common/pie/system/lib/libfrsdk.so", "/system/lib/libfrsdk.so");
package_extract_file("common/pie/system/lib64/libbarhopper.so", "/system/lib64/libbarhopper.so");
package_extract_file("common/pie/system/lib64/libfacenet.so", "/system/lib64/libfacenet.so");
package_extract_file("common/pie/system/lib64/libfilterpack_facedetect.so", "/system/lib64/libfilterpack_facedetect.so");
package_extract_file("common/pie/system/lib64/libfrsdk.so", "/system/lib64/libfrsdk.so");
package_extract_file("common/pie/system/lib64/libjni_latinimegoogle.so", "/system/lib64/libjni_latinimegoogle.so");
ui_print(">> Installing Library Files");
package_extract_file("common/pie/system/lib64/libsketchology_native.so", "/system/lib64/libsketchology_native.so");
ui_print(">> Installing System Files");
package_extract_dir("common/pie/system/usr/srec", "/system/usr/srec");
ui_print(">> Installing Utility Tool");
package_extract_file("common/pie/system/xbin/busybox", "/system/xbin/busybox");
ui_print(">> Set Permission");
set_perm(0, 0, 0755, "/system/addon.d/90bit_gapps.sh");
set_perm(0, 0, 0755, "/system/xbin/busybox");
set_perm(0, 0, 0755, "/system/app/FaceLock");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib/arm64");
set_perm(0, 0, 0644, "/system/app/FaceLock/FaceLock.apk");
set_perm(0, 0, 0644, "/system/app/FaceLock/lib/arm64/libfacenet.so");
set_perm(0, 0, 0755, "/system/app/GoogleContactsSyncAdapter");
set_perm(0, 0, 0644, "/system/app/GoogleContactsSyncAdapter/GoogleContactsSyncAdapter.apk");
set_perm(0, 0, 0755, "/system/app/GoogleExtShared");
set_perm(0, 0, 0644, "/system/app/GoogleExtShared/GoogleExtShared.apk");
set_perm(0, 0, 0755, "/system/app/MarkupGoogle");
set_perm(0, 0, 0644, "/system/app/MarkupGoogle/MarkupGoogle.apk");
set_perm(0, 0, 0755, "/system/app/SoundPickerPrebuilt");
set_perm(0, 0, 0644, "/system/app/SoundPickerPrebuilt/SoundPickerPrebuilt.apk");
set_perm_recursive(0, 2000, 0755, 0644, "/system/etc/default-permissions");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.dialer.support.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.maps.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.media.effects.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.widevine.software.xml");
set_perm(0, 0, 0644, "/system/etc/preferred-apps/google.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/dialer_experience.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google_build.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google_exclusives_enable.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google-hiddenapi-package-whitelist.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
set_perm(0, 0, 0644, "/system/etc/g.prop");
set_perm(0, 0, 0644, "/system/framework/com.google.android.dialer.support.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.maps.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.media.effects.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.widevine.software.drm.jar");
set_perm(0, 0, 0644, "/system/lib/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib/libfrsdk.so");
set_perm(0, 0, 0644, "/system/lib64/libbarhopper.so");
set_perm(0, 0, 0644, "/system/lib64/libfacenet.so");
set_perm(0, 0, 0644, "/system/lib64/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib64/libfrsdk.so");
set_perm(0, 0, 0644, "/system/lib64/libjni_latinimegoogle.so");
set_perm(0, 0, 0644, "/system/lib64/libsketchology_native.so");
set_perm(0, 0, 0755, "/system/priv-app/AndroidMigratePrebuilt");
set_perm(0, 0, 0644, "/system/priv-app/AndroidMigratePrebuilt/AndroidMigratePrebuilt.apk");
set_perm(0, 0, 0755, "/system/priv-app/AndroidPlatformServices");
set_perm(0, 0, 0644, "/system/priv-app/AndroidPlatformServices/AndroidPlatformServices.apk");
set_perm(0, 0, 0755, "/system/priv-app/ConfigUpdater");
set_perm(0, 0, 0644, "/system/priv-app/ConfigUpdater/ConfigUpdater.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleBackupTransport");
set_perm(0, 0, 0644, "/system/priv-app/GoogleBackupTransport/GoogleBackupTransport.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleExtServices");
set_perm(0, 0, 0644, "/system/priv-app/GoogleExtServices/GoogleExtServices.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleServicesFramework");
set_perm(0, 0, 0644, "/system/priv-app/GoogleServicesFramework/GoogleServicesFramework.apk");
set_perm(0, 0, 0755, "/system/priv-app/Phonesky");
set_perm(0, 0, 0644, "/system/priv-app/Phonesky/Phonesky.apk");
set_perm(0, 0, 0755, "/system/priv-app/PrebuiltGmsCorePi");
set_perm(0, 0, 0644, "/system/priv-app/PrebuiltGmsCorePi/PrebuiltGmsCorePi.apk");
set_perm(0, 0, 0755, "/system/priv-app/WellbeingPrebuilt");
set_perm(0, 0, 0644, "/system/priv-app/WellbeingPrebuilt/WellbeingPrebuilt.apk");
set_perm(0, 0, 0755, "/system/usr/srec");
set_perm_recursive(0, 2000, 0755, 0644, "/system/usr/srec/en-US");
ui_print(">> Installation Complete");
set_progress(0.99);
ui_print(">> Unmount Partitions");
run_program("/sbin/busybox", "umount", "/system");
ui_print(" ");
ui_print("===================Software===================");
ui_print("Custom GApps                   ");
ui_print(" *BiTGApps                     ");
ui_print("Android version                ");
ui_print(" *9.0.0                        ");
ui_print("SDK version                    ");
ui_print(" *28                           ");
ui_print("Build date                     ");
ui_print(" *Sun Sep 09 02:32:35 UTC 2018 ");
ui_print("Build ID                       ");
ui_print(" *0.2                          ");
ui_print("Developed By                   ");
ui_print(" *TheHitMan @ xda-developers   ");
ui_print(" ");
set_progress(1.0);
endif;

# Oreo
if file_getprop("/tmp/aroma-data/bit.prop","selected.0") == "1" then
ui_print(">> Mount Partition");
run_program("/sbin/busybox", "mount", "/system");
ui_print(">> Removing Pre-installed Files");
delete("/system/addon.d/90bit_gapps.sh");
delete("/system/xbin/busybox");
delete_recursive("/system/app/FaceLock");
delete_recursive("/system/app/GoogleContactsSyncAdapter");
delete_recursive("/system/app/GoogleExtShared");
delete("/system/etc/permissions/com.google.android.dialer.support.xml");
delete("/system/etc/permissions/com.google.android.maps.xml");
delete("/system/etc/permissions/com.google.android.media.effects.xml");
delete("/system/etc/permissions/com.google.widevine.software.xml");
delete("/system/etc/sysconfig/dialer_experience.xml");
delete("/system/etc/sysconfig/google_build.xml");
delete("/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
delete("/system/etc/g.prop");
delete("/system/framework/com.google.android.dialer.support.jar");
delete("/system/framework/com.google.android.maps.jar");
delete("/system/framework/com.google.android.media.effects.jar");
delete("/system/framework/com.google.widevine.software.drm.jar");
delete("/system/lib/libfilterpack_facedetect.so");
delete("/system/lib/libfrsdk.so");
delete("/system/lib64/libfacenet.so");
delete("/system/lib64/libfilterpack_facedetect.so");
delete("/system/lib64/libfrsdk.so");
delete_recursive("/system/priv-app/GmsCoreSetupPrebuilt");
delete_recursive("/system/priv-app/GoogleBackupTransport");
delete_recursive("/system/priv-app/GoogleExtServices");
delete_recursive("/system/priv-app/GoogleServicesFramework");
delete_recursive("/system/priv-app/Phonesky");
delete_recursive("/system/priv-app/PrebuiltGmsCore");
ui_print(">> Installing addon.d dependency");
package_extract_file("common/oreo/90bit_gapps.sh", "/system/addon.d/90bit_gapps.sh");
ui_print(">> Extracting Files");
ui_print(">> Installing System Application");
package_extract_dir("common/oreo/FaceLock", "/system/app/FaceLock");
package_extract_dir("common/oreo/GoogleContactsSyncAdapter", "/system/app/GoogleContactsSyncAdapter");
package_extract_dir("common/oreo/GoogleExtShared", "/system/app/GoogleExtShared");
ui_print(">> Installing System Priv-Application");
package_extract_dir("common/oreo/GmsCoreSetupPrebuilt", "/system/priv-app/GmsCoreSetupPrebuilt");
package_extract_dir("common/oreo/GoogleBackupTransport", "/system/priv-app/GoogleBackupTransport");
package_extract_dir("common/oreo/GoogleExtServices", "/system/priv-app/GoogleExtServices");
package_extract_dir("common/oreo/GoogleServicesFramework", "/system/priv-app/GoogleServicesFramework");
package_extract_dir("common/oreo/Phonesky", "/system/priv-app/Phonesky");
package_extract_dir("common/oreo/PrebuiltGmsCore", "/system/priv-app/PrebuiltGmsCore");
ui_print(">> Extra Files");
package_extract_file("common/oreo/system/etc/permissions/com.google.android.dialer.support.xml", "/system/etc/permissions/com.google.android.dialer.support.xml");
package_extract_file("common/oreo/system/etc/permissions/com.google.android.maps.xml", "/system/etc/permissions/com.google.android.maps.xml");
package_extract_file("common/oreo/system/etc/permissions/com.google.android.media.effects.xml", "/system/etc/permissions/com.google.android.media.effects.xml");
package_extract_file("common/oreo/system/etc/permissions/com.google.widevine.software.drm.xml", "/system/etc/permissions/com.google.widevine.software.xml");
package_extract_file("common/oreo/system/etc/sysconfig/dialer_experience.xml", "/system/etc/sysconfig/dialer_experience.xml");
package_extract_file("common/oreo/system/etc/sysconfig/google_build.xml", "/system/etc/sysconfig/google_build.xml");
package_extract_file("common/oreo/system/etc/sysconfig/whitelist_com.android.omadm.service.xml", "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
package_extract_file("common/oreo/system/etc/g.prop", "/system/etc/g.prop");
ui_print(">> Installing Framework");
package_extract_file("common/oreo/system/framework/com.google.android.dialer.support.jar", "/system/framework/com.google.android.dialer.support.jar");
package_extract_file("common/oreo/system/framework/com.google.android.maps.jar", "/system/framework/com.google.android.maps.jar");
package_extract_file("common/oreo/system/framework/com.google.android.media.effects.jar", "/system/framework/com.google.android.media.effects.jar");
package_extract_file("common/oreo/system/framework/com.google.widevine.software.drm.jar", "/system/framework/com.google.widevine.software.drm.jar");
ui_print(">> Installing FaceLock Files");
package_extract_file("common/oreo/system/lib/libfilterpack_facedetect.so", "/system/lib/libfilterpack_facedetect.so");
package_extract_file("common/oreo/system/lib/libfrsdk.so", "/system/lib/libfrsdk.so");
package_extract_file("common/oreo/system/lib64/libfacenet.so", "/system/lib64/libfacenet.so");
package_extract_file("common/oreo/system/lib64/libfilterpack_facedetect.so", "/system/lib64/libfilterpack_facedetect.so");
package_extract_file("common/oreo/system/lib64/libfrsdk.so", "/system/lib64/libfrsdk.so");
ui_print(">> Installing Utility Tool");
package_extract_file("common/oreo/system/xbin/busybox", "/system/xbin/busybox");
ui_print(">> Set Permission");
set_perm(0, 0, 0755, "/system/addon.d/90bit_gapps.sh");
set_perm(0, 0, 0755, "/system/xbin/busybox");
set_perm(0, 0, 0755, "/system/app/FaceLock");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib/arm64");
set_perm(0, 0, 0644, "/system/app/FaceLock/FaceLock.apk");
set_perm(0, 0, 0644, "/system/app/FaceLock/lib/arm64/libfacenet.so");
set_perm(0, 0, 0755, "/system/app/GoogleContactsSyncAdapter");
set_perm(0, 0, 0644, "/system/app/GoogleContactsSyncAdapter/GoogleContactsSyncAdapter.apk");
set_perm(0, 0, 0755, "/system/app/GoogleExtShared");
set_perm(0, 0, 0644, "/system/app/GoogleExtShared/GoogleExtShared.apk");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.dialer.support.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.maps.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.media.effects.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.widevine.software.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/dialer_experience.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google_build.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
set_perm(0, 0, 0644, "/system/etc/g.prop");
set_perm(0, 0, 0644, "/system/framework/com.google.android.dialer.support.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.maps.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.media.effects.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.widevine.software.drm.jar");
set_perm(0, 0, 0644, "/system/lib/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib/libfrsdk.so");
set_perm(0, 0, 0644, "/system/lib64/libfacenet.so");
set_perm(0, 0, 0644, "/system/lib64/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib64/libfrsdk.so");
set_perm(0, 0, 0755, "/system/priv-app/GmsCoreSetupPrebuilt");
set_perm(0, 0, 0644, "/system/priv-app/GmsCoreSetupPrebuilt/GmsCoreSetupPrebuilt.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleBackupTransport");
set_perm(0, 0, 0644, "/system/priv-app/GoogleBackupTransport/GoogleBackupTransport.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleExtServices");
set_perm(0, 0, 0644, "/system/priv-app/GoogleExtServices/GoogleExtServices.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleServicesFramework");
set_perm(0, 0, 0644, "/system/priv-app/GoogleServicesFramework/GoogleServicesFramework.apk");
set_perm(0, 0, 0755, "/system/priv-app/Phonesky");
set_perm(0, 0, 0644, "/system/priv-app/Phonesky/Phonesky.apk");
set_perm(0, 0, 0755, "/system/priv-app/PrebuiltGmsCore");
set_perm(0, 0, 0644, "/system/priv-app/PrebuiltGmsCore/PrebuiltGmsCore.apk");
ui_print(">> Installation Complete");
set_progress(0.99);
ui_print(">> Unmount Partitions");
run_program("/sbin/busybox", "umount", "/system");
ui_print(" ");
ui_print("===================Software===================");
ui_print("Custom GApps                   ");
ui_print(" *BiTGApps                     ");
ui_print("Android version                ");
ui_print(" *8.1.0                        ");
ui_print("SDK version                    ");
ui_print(" *27                           ");
ui_print("Build date                     ");
ui_print(" *Sat May 26 02:19:20 UTC 2018 ");
ui_print("Build ID                       ");
ui_print(" *0.3                          ");
ui_print("Developed By                   ");
ui_print(" *TheHitMan @ xda-developers   ");
ui_print(" ");
set_progress(1.0);
endif;

# Nougat
if file_getprop("/tmp/aroma-data/bit.prop","selected.0") == "1" then
ui_print(">> Mount Partition");
run_program("/sbin/busybox", "mount", "/system");
ui_print(">> Removing Pre-installed Files");
delete("/system/addon.d/90bit_gapps.sh");
delete("/system/xbin/busybox");
delete_recursive("/system/app/FaceLock");
delete_recursive("/system/app/GoogleContactsSyncAdapter");
delete_recursive("/system/app/GoogleExtShared");
delete("/system/etc/permissions/com.google.android.dialer.support.xml");
delete("/system/etc/permissions/com.google.android.maps.xml");
delete("/system/etc/permissions/com.google.android.media.effects.xml");
delete("/system/etc/permissions/com.google.widevine.software.xml");
delete("/system/etc/sysconfig/dialer_experience.xml");
delete("/system/etc/sysconfig/google_build.xml");
delete("/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
delete("/system/etc/g.prop");
delete("/system/framework/com.google.android.dialer.support.jar");
delete("/system/framework/com.google.android.maps.jar");
delete("/system/framework/com.google.android.media.effects.jar");
delete("/system/framework/com.google.widevine.software.drm.jar");
delete("/system/lib/libfilterpack_facedetect.so");
delete("/system/lib/libfrsdk.so");
delete("/system/lib64/libfacenet.so");
delete("/system/lib64/libfilterpack_facedetect.so");
delete("/system/lib64/libfrsdk.so");
delete_recursive("/system/priv-app/GmsCoreSetupPrebuilt");
delete_recursive("/system/priv-app/GoogleBackupTransport");
delete_recursive("/system/priv-app/GoogleExtServices");
delete_recursive("/system/priv-app/GoogleServicesFramework");
delete_recursive("/system/priv-app/Phonesky");
delete_recursive("/system/priv-app/PrebuiltGmsCore");
ui_print(">> Installing addon.d dependency");
package_extract_file("90bit_gapps.sh", "/system/addon.d/90bit_gapps.sh");
ui_print(">> Extracting Files");
ui_print(">> Installing System Application");
package_extract_dir("common/nougat/FaceLock", "/system/app/FaceLock");
package_extract_dir("common/nougat/GoogleContactsSyncAdapter", "/system/app/GoogleContactsSyncAdapter");
package_extract_dir("common/nougat/GoogleExtShared", "/system/app/GoogleExtShared");
ui_print(">> Installing System Priv-Application");
package_extract_dir("common/nougat/GmsCoreSetupPrebuilt", "/system/priv-app/GmsCoreSetupPrebuilt");
package_extract_dir("common/nougat/GoogleBackupTransport", "/system/priv-app/GoogleBackupTransport");
package_extract_dir("common/nougat/GoogleExtServices", "/system/priv-app/GoogleExtServices");
package_extract_dir("common/nougat/GoogleServicesFramework", "/system/priv-app/GoogleServicesFramework");
package_extract_dir("common/nougat/Phonesky", "/system/priv-app/Phonesky");
package_extract_dir("common/nougat/PrebuiltGmsCore", "/system/priv-app/PrebuiltGmsCore");
ui_print(">> Extra Files");
package_extract_file("common/nougat/system/etc/permissions/com.google.android.dialer.support.xml", "/system/etc/permissions/com.google.android.dialer.support.xml");
package_extract_file("common/nougat/system/etc/permissions/com.google.android.maps.xml", "/system/etc/permissions/com.google.android.maps.xml");
package_extract_file("common/nougat/system/etc/permissions/com.google.android.media.effects.xml", "/system/etc/permissions/com.google.android.media.effects.xml");
package_extract_file("common/nougat/system/etc/permissions/com.google.widevine.software.drm.xml", "/system/etc/permissions/com.google.widevine.software.xml");
package_extract_file("common/nougat/system/etc/sysconfig/dialer_experience.xml", "/system/etc/sysconfig/dialer_experience.xml");
package_extract_file("common/nougat/system/etc/sysconfig/google_build.xml", "/system/etc/sysconfig/google_build.xml");
package_extract_file("common/nougat/system/etc/sysconfig/whitelist_com.android.omadm.service.xml", "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
package_extract_file("common/nougat/system/etc/g.prop", "/system/etc/g.prop");
ui_print(">> Installing Framework");
package_extract_file("common/nougat/system/framework/com.google.android.dialer.support.jar", "/system/framework/com.google.android.dialer.support.jar");
package_extract_file("common/nougat/system/framework/com.google.android.maps.jar", "/system/framework/com.google.android.maps.jar");
package_extract_file("common/nougat/system/framework/com.google.android.media.effects.jar", "/system/framework/com.google.android.media.effects.jar");
package_extract_file("common/nougat/system/framework/com.google.widevine.software.drm.jar", "/system/framework/com.google.widevine.software.drm.jar");
ui_print(">> Installing FaceLock Files");
package_extract_file("common/nougat/system/lib/libfilterpack_facedetect.so", "/system/lib/libfilterpack_facedetect.so");
package_extract_file("common/nougat/system/lib/libfrsdk.so", "/system/lib/libfrsdk.so");
package_extract_file("common/nougat/system/lib64/libfacenet.so", "/system/lib64/libfacenet.so");
package_extract_file("common/nougat/system/lib64/libfilterpack_facedetect.so", "/system/lib64/libfilterpack_facedetect.so");
package_extract_file("common/nougat/system/lib64/libfrsdk.so", "/system/lib64/libfrsdk.so");
ui_print(">> Installing Utility Tool");
package_extract_file("common/nougat/system/xbin/busybox", "/system/xbin/busybox");
ui_print(">> Set Permission");
set_perm(0, 0, 0755, "/system/addon.d/90bit_gapps.sh");
set_perm(0, 0, 0755, "/system/xbin/busybox");
set_perm(0, 0, 0755, "/system/app/FaceLock");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib");
set_perm(0, 0, 0755, "/system/app/FaceLock/lib/arm64");
set_perm(0, 0, 0644, "/system/app/FaceLock/FaceLock.apk");
set_perm(0, 0, 0644, "/system/app/FaceLock/lib/arm64/libfacenet.so");
set_perm(0, 0, 0755, "/system/app/GoogleContactsSyncAdapter");
set_perm(0, 0, 0644, "/system/app/GoogleContactsSyncAdapter/GoogleContactsSyncAdapter.apk");
set_perm(0, 0, 0755, "/system/app/GoogleExtShared");
set_perm(0, 0, 0644, "/system/app/GoogleExtShared/GoogleExtShared.apk");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.dialer.support.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.maps.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.android.media.effects.xml");
set_perm(0, 0, 0644, "/system/etc/permissions/com.google.widevine.software.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/dialer_experience.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/google_build.xml");
set_perm(0, 0, 0644, "/system/etc/sysconfig/whitelist_com.android.omadm.service.xml");
set_perm(0, 0, 0644, "/system/etc/g.prop");
set_perm(0, 0, 0644, "/system/framework/com.google.android.dialer.support.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.maps.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.android.media.effects.jar");
set_perm(0, 0, 0644, "/system/framework/com.google.widevine.software.drm.jar");
set_perm(0, 0, 0644, "/system/lib/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib/libfrsdk.so");
set_perm(0, 0, 0644, "/system/lib64/libfacenet.so");
set_perm(0, 0, 0644, "/system/lib64/libfilterpack_facedetect.so");
set_perm(0, 0, 0644, "/system/lib64/libfrsdk.so");
set_perm(0, 0, 0755, "/system/priv-app/GmsCoreSetupPrebuilt");
set_perm(0, 0, 0644, "/system/priv-app/GmsCoreSetupPrebuilt/GmsCoreSetupPrebuilt.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleBackupTransport");
set_perm(0, 0, 0644, "/system/priv-app/GoogleBackupTransport/GoogleBackupTransport.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleExtServices");
set_perm(0, 0, 0644, "/system/priv-app/GoogleExtServices/GoogleExtServices.apk");
set_perm(0, 0, 0755, "/system/priv-app/GoogleServicesFramework");
set_perm(0, 0, 0644, "/system/priv-app/GoogleServicesFramework/GoogleServicesFramework.apk");
set_perm(0, 0, 0755, "/system/priv-app/Phonesky");
set_perm(0, 0, 0644, "/system/priv-app/Phonesky/Phonesky.apk");
set_perm(0, 0, 0755, "/system/priv-app/PrebuiltGmsCore");
set_perm(0, 0, 0644, "/system/priv-app/PrebuiltGmsCore/PrebuiltGmsCore.apk");
ui_print(">> Installation Complete");
set_progress(0.99);
ui_print(">> Unmount Partitions");
run_program("/sbin/busybox", "umount", "/system");
ui_print(" ");
ui_print("===================Software===================");
ui_print("Custom GApps                   ");
ui_print(" *BiTGApps                     ");
ui_print("Android version                ");
ui_print(" *7.1.x                        ");
ui_print("SDK version                    ");
ui_print(" *25                           ");
ui_print("Build date                     ");
ui_print(" *Sat May 26 10:37:12 UTC 2018 ");
ui_print("Build ID                       ");
ui_print(" *0.1                          ");
ui_print("Developed By                   ");
ui_print(" *TheHitMan @ xda-developers   ");
ui_print(" ");
set_progress(1.0);
endif;

########## END OF AROMA ##########
